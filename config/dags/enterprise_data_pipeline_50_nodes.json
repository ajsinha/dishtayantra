{
  "name": "enterprise_data_pipeline_50_nodes",
  "start_time": "0600",
  "end_time": "2300",
  "subscribers": [
    {
      "name": "kafka_sub_transactions",
      "config": {
        "source": "kafka://topic/transactions",
        "bootstrap_servers": ["localhost:9092"],
        "group_id": "transactions_group",
        "max_depth": 5000
      }
    },
    {
      "name": "kafka_sub_customers",
      "config": {
        "source": "kafka://topic/customers",
        "bootstrap_servers": ["localhost:9092"],
        "group_id": "customers_group",
        "max_depth": 3000
      }
    },
    {
      "name": "kafka_sub_products",
      "config": {
        "source": "kafka://topic/products",
        "bootstrap_servers": ["localhost:9092"],
        "group_id": "products_group",
        "max_depth": 2000
      }
    },
    {
      "name": "kafka_sub_payments",
      "config": {
        "source": "kafka://topic/payments",
        "bootstrap_servers": ["localhost:9092"],
        "group_id": "payments_group",
        "max_depth": 5000
      }
    },
    {
      "name": "kafka_sub_shipping",
      "config": {
        "source": "kafka://topic/shipping",
        "bootstrap_servers": ["localhost:9092"],
        "group_id": "shipping_group",
        "max_depth": 3000
      }
    },
    {
      "name": "file_sub_reference_data",
      "config": {
        "source": "file:///data/reference/master_data.json",
        "watch_interval": 300
      }
    },
    {
      "name": "file_sub_pricing_rules",
      "config": {
        "source": "file:///data/config/pricing_rules.json",
        "watch_interval": 600
      }
    },
    {
      "name": "metronome_heartbeat",
      "config": {
        "source": "metronome",
        "message": "health_check",
        "interval": 30
      }
    },
    {
      "name": "metronome_stats",
      "config": {
        "source": "metronome",
        "message": "collect_stats",
        "interval": 60
      }
    },
    {
      "name": "metronome_cleanup",
      "config": {
        "source": "metronome",
        "message": "cleanup_trigger",
        "interval": 3600
      }
    }
  ],
  "publishers": [
    {
      "name": "kafka_pub_processed",
      "config": {
        "destination": "kafka://topic/processed_data",
        "bootstrap_servers": ["localhost:9092"]
      }
    },
    {
      "name": "kafka_pub_alerts",
      "config": {
        "destination": "kafka://topic/alerts",
        "bootstrap_servers": ["localhost:9092"]
      }
    },
    {
      "name": "kafka_pub_analytics",
      "config": {
        "destination": "kafka://topic/analytics",
        "bootstrap_servers": ["localhost:9092"]
      }
    },
    {
      "name": "kafka_pub_notifications",
      "config": {
        "destination": "kafka://topic/notifications",
        "bootstrap_servers": ["localhost:9092"]
      }
    },
    {
      "name": "file_pub_processed_log",
      "config": {
        "destination": "file:///tmp/log/processed.jsonl"
      }
    },
    {
      "name": "file_pub_audit_log",
      "config": {
        "destination": "file:///tmp/log/audit.jsonl"
      }
    },
    {
      "name": "file_pub_errors_log",
      "config": {
        "destination": "file:///tmp/log/errors.jsonl"
      }
    },
    {
      "name": "file_pub_metrics_log",
      "config": {
        "destination": "file:///tmp/log/metrics.jsonl",
        "batch_size": 100,
        "publish_interval": 10
      }
    },
    {
      "name": "file_pub_heartbeat",
      "config": {
        "destination": "file:///tmp/log/heartbeat.jsonl"
      }
    }
  ],
  "calculators": [
    {
      "name": "calc_defaults",
      "type": "ApplyDefaultsCalculator",
      "config": {
        "defaults": {
          "status": "pending",
          "processed_at": null
        }
      }
    },
    {
      "name": "calc_multiplication",
      "type": "MultiplicationCalculator",
      "config": {
        "arguments": ["quantity", "price"],
        "output_attribute": "total"
      }
    },
    {
      "name": "calc_addition",
      "type": "AdditionCalculator",
      "config": {
        "arguments": ["subtotal", "tax", "shipping"],
        "output_attribute": "grand_total"
      }
    },
    {
      "name": "calc_enrichment",
      "type": "ApplyDefaultsCalculator",
      "config": {
        "defaults": {
          "enriched": true,
          "version": "1.0"
        }
      }
    },
    {
      "name": "calc_validation",
      "type": "ApplyDefaultsCalculator",
      "config": {
        "defaults": {
          "validated": true
        }
      }
    }
  ],
  "transformers": [
    {
      "name": "trans_filter_keep",
      "type": "AttributeFilterDataTransformer",
      "config": {
        "keep_attributes": ["id", "amount", "status", "timestamp"]
      }
    },
    {
      "name": "trans_filter_remove",
      "type": "AttributeFilterAwayDataTransformer",
      "config": {
        "filter_attributes": ["password", "ssn", "api_key"]
      }
    }
  ],
  "nodes": [
    {
      "name": "node_01_trans_input",
      "type": "SubscriptionNode",
      "config": {},
      "subscriber": "kafka_sub_transactions"
    },
    {
      "name": "node_02_trans_validation",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_validation"
    },
    {
      "name": "node_03_trans_enrichment",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_enrichment"
    },
    {
      "name": "node_04_customers_input",
      "type": "SubscriptionNode",
      "config": {},
      "subscriber": "kafka_sub_customers"
    },
    {
      "name": "node_05_customer_validation",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_validation"
    },
    {
      "name": "node_06_customer_enrichment",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_enrichment"
    },
    {
      "name": "node_07_products_input",
      "type": "SubscriptionNode",
      "config": {},
      "subscriber": "kafka_sub_products"
    },
    {
      "name": "node_08_product_validation",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_validation"
    },
    {
      "name": "node_09_product_enrichment",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_enrichment"
    },
    {
      "name": "node_10_payments_input",
      "type": "SubscriptionNode",
      "config": {},
      "subscriber": "kafka_sub_payments"
    },
    {
      "name": "node_11_payment_validation",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_validation"
    },
    {
      "name": "node_12_shipping_input",
      "type": "SubscriptionNode",
      "config": {},
      "subscriber": "kafka_sub_shipping"
    },
    {
      "name": "node_13_shipping_validation",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_validation"
    },
    {
      "name": "node_14_reference_data_input",
      "type": "SubscriptionNode",
      "config": {},
      "subscriber": "file_sub_reference_data"
    },
    {
      "name": "node_15_pricing_rules_input",
      "type": "SubscriptionNode",
      "config": {},
      "subscriber": "file_sub_pricing_rules"
    },
    {
      "name": "node_16_price_calculation",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_multiplication"
    },
    {
      "name": "node_17_tax_calculation",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_multiplication"
    },
    {
      "name": "node_18_total_calculation",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_addition"
    },
    {
      "name": "node_19_central_merge",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_enrichment",
      "comment": "COMPLEX NODE - 7 incoming edges"
    },
    {
      "name": "node_20_comprehensive_validation",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_validation",
      "comment": "COMPLEX NODE - 6 incoming edges"
    },
    {
      "name": "node_21_fraud_detection",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults"
    },
    {
      "name": "node_22_risk_assessment",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults",
      "comment": "COMPLEX NODE - 5 incoming edges"
    },
    {
      "name": "node_23_compliance_check",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults"
    },
    {
      "name": "node_24_credit_verification",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults"
    },
    {
      "name": "node_25_inventory_check",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults"
    },
    {
      "name": "node_26_shipping_calc",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults"
    },
    {
      "name": "node_27_discount_application",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults"
    },
    {
      "name": "node_28_loyalty_calc",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults"
    },
    {
      "name": "node_29_promotion_check",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults"
    },
    {
      "name": "node_30_analytics_aggregation",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_enrichment",
      "comment": "COMPLEX NODE - 6 incoming edges"
    },
    {
      "name": "node_31_metrics_collection",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults"
    },
    {
      "name": "node_32_business_rules",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults"
    },
    {
      "name": "node_33_data_quality_check",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_validation"
    },
    {
      "name": "node_34_audit_preparation",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_enrichment"
    },
    {
      "name": "node_35_notification_prep",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults"
    },
    {
      "name": "node_36_alert_generation",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults"
    },
    {
      "name": "node_37_error_handling",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults"
    },
    {
      "name": "node_38_final_processing",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_enrichment",
      "comment": "COMPLEX NODE - 5 incoming edges"
    },
    {
      "name": "node_39_output_transformation",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults",
      "output_transformers": ["trans_filter_keep"]
    },
    {
      "name": "node_40_sensitive_removal",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_defaults",
      "input_transformers": ["trans_filter_remove"]
    },
    {
      "name": "node_41_comprehensive_check",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_validation",
      "comment": "COMPLEX NODE - 5 incoming edges"
    },
    {
      "name": "node_42_kafka_processed_out",
      "type": "PublicationNode",
      "config": {},
      "publishers": ["kafka_pub_processed"]
    },
    {
      "name": "node_43_kafka_analytics_out",
      "type": "PublicationNode",
      "config": {},
      "publishers": ["kafka_pub_analytics"]
    },
    {
      "name": "node_44_kafka_alerts_out",
      "type": "PublicationNode",
      "config": {},
      "publishers": ["kafka_pub_alerts"]
    },
    {
      "name": "node_45_kafka_notifications_out",
      "type": "PublicationNode",
      "config": {},
      "publishers": ["kafka_pub_notifications"]
    },
    {
      "name": "node_46_file_audit_out",
      "type": "PublicationNode",
      "config": {},
      "publishers": ["file_pub_audit_log"]
    },
    {
      "name": "node_47_file_errors_out",
      "type": "PublicationNode",
      "config": {},
      "publishers": ["file_pub_errors_log"]
    },
    {
      "name": "node_48_metronome_heartbeat",
      "type": "MetronomeNode",
      "config": {
        "interval": 30
      },
      "subscriber": "metronome_heartbeat",
      "publishers": ["file_pub_heartbeat"]
    },
    {
      "name": "node_49_metronome_stats",
      "type": "MetronomeNode",
      "config": {
        "interval": 60
      },
      "subscriber": "metronome_stats",
      "publishers": ["file_pub_metrics_log"]
    },
    {
      "name": "node_50_pipeline_completion",
      "type": "CalculationNode",
      "config": {},
      "calculator": "calc_enrichment"
    }
  ],
  "edges": [
    {"from_node": "node_01_trans_input", "to_node": "node_02_trans_validation"},
    {"from_node": "node_02_trans_validation", "to_node": "node_03_trans_enrichment"},
    {"from_node": "node_03_trans_enrichment", "to_node": "node_19_central_merge"},

    {"from_node": "node_04_customers_input", "to_node": "node_05_customer_validation"},
    {"from_node": "node_05_customer_validation", "to_node": "node_06_customer_enrichment"},
    {"from_node": "node_06_customer_enrichment", "to_node": "node_19_central_merge"},

    {"from_node": "node_07_products_input", "to_node": "node_08_product_validation"},
    {"from_node": "node_08_product_validation", "to_node": "node_09_product_enrichment"},
    {"from_node": "node_09_product_enrichment", "to_node": "node_19_central_merge"},

    {"from_node": "node_10_payments_input", "to_node": "node_11_payment_validation"},
    {"from_node": "node_11_payment_validation", "to_node": "node_19_central_merge"},

    {"from_node": "node_12_shipping_input", "to_node": "node_13_shipping_validation"},
    {"from_node": "node_13_shipping_validation", "to_node": "node_19_central_merge"},

    {"from_node": "node_14_reference_data_input", "to_node": "node_19_central_merge"},
    {"from_node": "node_15_pricing_rules_input", "to_node": "node_19_central_merge"},

    {"from_node": "node_19_central_merge", "to_node": "node_16_price_calculation"},
    {"from_node": "node_16_price_calculation", "to_node": "node_17_tax_calculation"},
    {"from_node": "node_17_tax_calculation", "to_node": "node_18_total_calculation"},

    {"from_node": "node_18_total_calculation", "to_node": "node_20_comprehensive_validation"},
    {"from_node": "node_19_central_merge", "to_node": "node_20_comprehensive_validation"},
    {"from_node": "node_03_trans_enrichment", "to_node": "node_20_comprehensive_validation"},
    {"from_node": "node_06_customer_enrichment", "to_node": "node_20_comprehensive_validation"},
    {"from_node": "node_09_product_enrichment", "to_node": "node_20_comprehensive_validation"},
    {"from_node": "node_11_payment_validation", "to_node": "node_20_comprehensive_validation"},

    {"from_node": "node_20_comprehensive_validation", "to_node": "node_21_fraud_detection"},
    {"from_node": "node_21_fraud_detection", "to_node": "node_22_risk_assessment"},

    {"from_node": "node_20_comprehensive_validation", "to_node": "node_22_risk_assessment"},
    {"from_node": "node_18_total_calculation", "to_node": "node_22_risk_assessment"},
    {"from_node": "node_19_central_merge", "to_node": "node_22_risk_assessment"},
    {"from_node": "node_11_payment_validation", "to_node": "node_22_risk_assessment"},

    {"from_node": "node_22_risk_assessment", "to_node": "node_23_compliance_check"},
    {"from_node": "node_23_compliance_check", "to_node": "node_24_credit_verification"},
    {"from_node": "node_24_credit_verification", "to_node": "node_25_inventory_check"},
    {"from_node": "node_25_inventory_check", "to_node": "node_26_shipping_calc"},
    {"from_node": "node_26_shipping_calc", "to_node": "node_27_discount_application"},
    {"from_node": "node_27_discount_application", "to_node": "node_28_loyalty_calc"},
    {"from_node": "node_28_loyalty_calc", "to_node": "node_29_promotion_check"},

    {"from_node": "node_29_promotion_check", "to_node": "node_30_analytics_aggregation"},
    {"from_node": "node_22_risk_assessment", "to_node": "node_30_analytics_aggregation"},
    {"from_node": "node_20_comprehensive_validation", "to_node": "node_30_analytics_aggregation"},
    {"from_node": "node_18_total_calculation", "to_node": "node_30_analytics_aggregation"},
    {"from_node": "node_19_central_merge", "to_node": "node_30_analytics_aggregation"},
    {"from_node": "node_21_fraud_detection", "to_node": "node_30_analytics_aggregation"},

    {"from_node": "node_30_analytics_aggregation", "to_node": "node_31_metrics_collection"},
    {"from_node": "node_31_metrics_collection", "to_node": "node_32_business_rules"},
    {"from_node": "node_32_business_rules", "to_node": "node_33_data_quality_check"},
    {"from_node": "node_33_data_quality_check", "to_node": "node_34_audit_preparation"},
    {"from_node": "node_34_audit_preparation", "to_node": "node_35_notification_prep"},
    {"from_node": "node_35_notification_prep", "to_node": "node_36_alert_generation"},
    {"from_node": "node_36_alert_generation", "to_node": "node_37_error_handling"},

    {"from_node": "node_37_error_handling", "to_node": "node_38_final_processing"},
    {"from_node": "node_30_analytics_aggregation", "to_node": "node_38_final_processing"},
    {"from_node": "node_22_risk_assessment", "to_node": "node_38_final_processing"},
    {"from_node": "node_20_comprehensive_validation", "to_node": "node_38_final_processing"},
    {"from_node": "node_34_audit_preparation", "to_node": "node_38_final_processing"},

    {"from_node": "node_38_final_processing", "to_node": "node_39_output_transformation"},
    {"from_node": "node_39_output_transformation", "to_node": "node_40_sensitive_removal"},

    {"from_node": "node_40_sensitive_removal", "to_node": "node_41_comprehensive_check"},
    {"from_node": "node_38_final_processing", "to_node": "node_41_comprehensive_check"},
    {"from_node": "node_30_analytics_aggregation", "to_node": "node_41_comprehensive_check"},
    {"from_node": "node_34_audit_preparation", "to_node": "node_41_comprehensive_check"},
    {"from_node": "node_36_alert_generation", "to_node": "node_41_comprehensive_check"},

    {"from_node": "node_41_comprehensive_check", "to_node": "node_42_kafka_processed_out"},
    {"from_node": "node_30_analytics_aggregation", "to_node": "node_43_kafka_analytics_out"},
    {"from_node": "node_36_alert_generation", "to_node": "node_44_kafka_alerts_out"},
    {"from_node": "node_35_notification_prep", "to_node": "node_45_kafka_notifications_out"},
    {"from_node": "node_34_audit_preparation", "to_node": "node_46_file_audit_out"},
    {"from_node": "node_37_error_handling", "to_node": "node_47_file_errors_out"},

    {"from_node": "node_42_kafka_processed_out", "to_node": "node_50_pipeline_completion"},
    {"from_node": "node_43_kafka_analytics_out", "to_node": "node_50_pipeline_completion"},
    {"from_node": "node_44_kafka_alerts_out", "to_node": "node_50_pipeline_completion"},
    {"from_node": "node_45_kafka_notifications_out", "to_node": "node_50_pipeline_completion"}
  ]
}